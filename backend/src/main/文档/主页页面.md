# 主页接口文档

接口基地址：`http://localhost:5000/api/home`  
允许跨域来源：`http://localhost:5173`

---

## 1. 首页概览//用不用都行，自己在前端写死就行，我懒得删了

- **路径**：`GET /overview`
- **说明**：返回首页顶部的全局概览信息，包含欢迎语、未读提醒和快捷入口。
- **请求参数**：无
- **响应示例**：
```json
{
  "title": "首页概览",
  "welcomeMessage": "欢迎访问首页",
  "notifications": 2,
  "shortcuts": ["我的", "猜你喜欢", "数据分析"]
}
```

---

## 2. 我的页面信息

- **路径**：`GET /me`
- **说明**：根据 `userId` 返回用户详情，供跳转“我的”页面使用。数据来源：`users` 与 `user_preferences`。
- **请求参数**：
  - `userId`（必填，Long）：用户 ID
- **请求示例**：`GET /api/home/me?userId=1`
- **响应示例**：
```json
{
  "profile": {
    "userId": 1,
    "username": "demo_user",
    "joinedAt": "2025-01-05T10:11:12Z",
    "userProfile": {
      "budget": {"min": 300, "max": 600},
      "preferred_locations": ["南山区", "福田区"]
    },
    "preferences": {
      "house_types": ["apartment"],
      "orientations": ["south"]
    },
    "stats": {
      "favorites": 12,
      "browsed": 48,
      "recommendations": 6
    }
  },
  "message": "个人信息获取成功"
}
```
- **错误响应**：
  - 404：`用户不存在`
  - 500：`获取个人信息失败`

---

## 3. 猜你喜欢列表

- **路径**：`GET /guess-you-like`
- **说明**：返回“猜你喜欢”模块的房源推荐。目前返回静态示例数据，可后续接入真实推荐结果。
- **请求参数**：无
- **响应示例**：
```json
{
  "items": [
    {
      "propertyId": 101,
      "title": "万科城市花园 精装三房 南向采光好",
      "summary": "南山区 · 89.5㎡ · 3室2厅2卫",
      "totalPrice": 650.5,
      "cover": "https://picsum.photos/seed/101/300/200",
      "detailUrl": "https://example.com/property/101",
      "tags": ["近地铁", "学区房", "南北通透"]
    }
  ],
  "message": "猜你喜欢数据（示例）"
}
```

---

## 4. 查询页入口推荐

- **路径**：`GET /go-query`
- **说明**：跳转到查询页前的入口接口，复用“猜你喜欢”数据，便于前端在查询页展示推荐卡片或做预加载。
- **请求参数**：无
- **响应示例**：
```json
{
  "items": [
    {
      "propertyId": 101,
      "title": "万科城市花园 精装三房 南向采光好",
      "summary": "南山区 · 89.5㎡ · 3室2厅2卫",
      "totalPrice": 650.5,
      "cover": "https://picsum.photos/seed/101/300/200",
      "detailUrl": "https://example.com/property/101",
      "tags": ["近地铁", "学区房", "南北通透"]
    }
  ],
  "message": "查询页推荐数据（示例）"
}
```

---

## 调试提示

1. 数据库结构参考 `src/main/resources/script.sql`，确保 `users` 与 `user_preferences` 已创建并有数据。
2. 控制器通过 JDBC 直接读取数据库，连接参数来源 `application.properties` (`spring.datasource.*`)。
3. 如果返回 500 错误，请查看后端日志定位 SQL 或连接异常。

