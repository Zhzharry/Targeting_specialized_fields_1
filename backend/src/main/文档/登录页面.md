# 登录页面接口文档

## 数据库说明

- 数据库：`second_hand_housing`（详见 `src/main/resources/script.sql`）
- 表：`users`
  - `user_id` INT 主键，自增
  - `username` VARCHAR(50) 唯一，必填
  - `password` VARCHAR(255) 明文存储（示例环境）
  - `user_profile` JSON，可选

## 接口基地址

- 后端服务：`http://localhost:5000`
- 控制器路径：`/api/login`
- 允许的跨域来源：`http://localhost:5173`

## 1. 用户登录

- **URL**：`POST /api/login`
- **功能**：验证用户名与密码
- **请求头**：`Content-Type: application/json`
- **请求体示例**：
```json
{
  "username": "demo_user",
  "password": "123456"
}
```
- **响应示例（200 成功）**：
```json
{
  "userId": 1,
  "username": "demo_user",
  "userProfile": "{\"budget\":{\"min\":300}}",
  "message": "登录成功"
}
```
- **错误响应示例**：
  - 400：`{"message": "用户名和密码不能为空"}`
  - 401：`{"message": "用户名或密码错误"}`
  - 500：`{"message": "登录失败", "error": "数据库错误信息"}`

## 2. 用户注册

- **URL**：`POST /api/login/register`
- **功能**：创建新用户
- **请求头**：`Content-Type: application/json`
- **请求体示例**：
```json
{
  "username": "new_user",
  "password": "123456",
  "user_profile": {
    "budget": {"min": 300, "max": 600},
    "preferred_locations": ["南山区", "福田区"]
  }
}
```
- **响应示例（201 成功）**：
```json
{
  "userId": 2,
  "username": "new_user",
  "message": "注册成功"
}
```
- **错误响应示例**：
  - 400：`{"message": "用户名和密码不能为空"}`
  - 409：`{"message": "用户名已存在"}`
  - 500：`{"message": "注册失败", "error": "数据库错误信息"}`

## 调试建议

1. 确保 MySQL 已按照 `script.sql` 初始化。
2. 控制器直接使用 JDBC，连接参数取自 `application.properties`。
3. 当前示例使用明文密码，正式环境请替换为加密存储。
4. 若返回 500 错误，请查看后端日志以获取具体 SQL 异常信息。
